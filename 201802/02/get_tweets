var twitter_client = http.createClient(80, "api.twitter.com");
 
var tweet_emitter = new events.EventEmitter();
 
function get_tweets() {
    var request = twitter_client.request("GET", "/1/statuses/public_timeline.json", {"host": "api.twitter.com"});
     
    request.addListener("response", function(response) {
        var body = "";
        response.addListener("data", function(data) {
            body += data;
        });
         
        response.addListener("end", function() {
            var tweets = JSON.parse(body);
            if(tweets.length > 0) {
                tweet_emitter.emit("tweets", tweets);
            }
        });
    });
     
    request.close();
}
 
setInterval(get_tweets, 5000);
